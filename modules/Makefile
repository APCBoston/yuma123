# Makefile for NETCONF project
#  
# modules directory
#
# processes all the modules in this subtree
# For each YANG file in the subtree, generate
# an HTML and XSD file for that file in the directory
#
#    XSD: ncorg/ncorg/static/xsd
#
#    HTML: ncorg/ncorg/static/modules
#
# within the trunk subtree


############### SOURCE PROFILE ##############################

SUBDIR_NM=modules
YANGDUMP=$(YANG_HOME)/target/bin/yangdump
SUBDIR_CPP=""


############### TARGET PROFILE ##############################

TBASE=../ncorg/ncorg/static
XSD_TARGET=$(TBASE)/xsd
COPY_TARGET=$(TBASE)/src
HTML_TARGET=$(TBASE)/modules
COOKEDHTML_TARGET=$(TBASE)/cookedmodules

SQLDB_TARGET=../mysql/newmod.sql


######################### MAKE RULES ######################

all: xsd html cookedhtml sqldb copy

xsd:
	$(YANGDUMP) --format=xsd --subtree=. --defnames \
	--output=$(XSD_TARGET) --urlstart=/xsd --log-level=warn

html:
	$(YANGDUMP) --format=html --subtree=. --defnames \
	--output=$(HTML_TARGET) --log-level=warn --html-div \
	--html-toc=menu --urlstart=/modules --simurls

cookedhtml:
	$(YANGDUMP) --format=html --subtree=. --defnames \
	--output=$(COOKEDHTML_TARGET) --log-level=warn --html-div \
	--html-toc=menu --urlstart=/modules --simurls --objview=cooked

sqldb:
	$(YANGDUMP) --format=sqldb --subtree=. \
	--output=$(SQLDB_TARGET) --log-level=warn \
	--urlstart=/modules --simurls

copy:
	$(YANGDUMP) --format=copy --subtree=. --defnames \
	--output=$(COPY_TARGET) --log-level=warn 

test:

install:

clean:

superclean:

# prevent the make program from choking on all the symbols
# that get generated from autogenerated make rules
.NOEXPORT:

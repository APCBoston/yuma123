# Makefile for Yuma entire tools directory
#  
#   top directory

##################### LIBRARIES ########################
#
# DIRS:  
# This is an ordered list
# Put only the directories that build object files in the list

# make all targets
DIRS = src modules etc doc man

TOP_INSTALL = $(DESTDIR)/usr/share/yuma

LIB_INSTALL = $(DESTDIR)/usr/lib/yuma

ifdef DESTDIR
JFLAG= 
else
JFLAG = -j3
endif

#################### PLATFORM DEFINITIONS ############

all: treeall

################################ MAKE RULES #################################
#

clean: treeclean

superclean: treesuperclean

distclean: distclean

install: treeinstall

uninstall: treeuninstall




treeall:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) $(JFLAG) all && cd ..;\
        done

treeclean:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) clean && cd ..;\
        done

treesuperclean:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) superclean && cd ..;\
        done

treedistclean:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) distclean && cd ..;\
        done

treeinstall:
ifdef DESTDIR
	mkdir -p $(DESTDIR)/usr/bin
	mkdir -p $(DESTDIR)/usr/sbin
	mkdir -p $(DESTDIR)/usr/lib
	mkdir -p $(DESTDIR)/usr/share/doc
endif
	mkdir -p $(LIB_INSTALL)
	mkdir -p $(TOP_INSTALL)
	mkdir -p $(TOP_INSTALL)/data
	mkdir -p $(TOP_INSTALL)/etc
	mkdir -p $(TOP_INSTALL)/modules
	mkdir -p $(TOP_INSTALL)/scripts
	for dir in $(DIRS); do\
          cd $$dir && $(MAKE) install && cd ..;\
        done


treeuninstall:
	for dir in $(DIRS); do\
          cd $$dir && $(MAKE) uninstall && cd ..;\
        done


.PHONY: all clean superclean distclean install uninstall \
	treeall treeclean treesuperclean treedistclean \
	treeinstall treeuninstall


# prevent the make program from choking on all the symbols
# that get generated from autogenerated make rules
.NOEXPORT:




#
# platform.profile.depend
#
######################### PROFILE ########################

# platform.profile must be included before this file!!!

################## MAKE DEPENDENCIES #####################
# following depend rule is the GNU version! Other versions TBD
# this rule cannot be included by the top level makefile
# so platform.profile.cmn was created to allow that Makefile
# to define a different 'depend' rule.
depend: $(DEPS)
	@if [ ! -f Makefile ]; then \
	    echo "Error: Makefile missing!"; \
	    exit 1; \
	fi
	@rm -f Makefile.tmp
	@awk -f ../../bin/chopmake.awk Makefile > Makefile.tmp
	@for i in $(DEPS); do \
	  if [ -f $$i ] ; then \
	    (cat $$i >> Makefile.tmp; echo "" >> Makefile.tmp) ; \
	  else \
	    (echo "*** Warning: Dependency file $i.D is missing! (Skipping...) ***"; \
	     echo "# Warning: Missing file $$i !!!") ; \
	  fi; \
	done
	@echo "" >> Makefile.tmp
	@rm -f Makefile
	@mv Makefile.tmp Makefile
# delete the .D files to force make depend to rebuild them each time
# that target is built
	@rm -f $(DEPS)


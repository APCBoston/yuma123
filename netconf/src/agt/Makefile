# Makefile for NETCONF project
#  
#   NCX agent main directory

############### SOURCE PROFILE ##############################

SUBDIR_NM=agt
SUBDIR_CPP=

############### TARGET PROFILE ##############################

TARGET=$(TBASE)/$(SUBDIR_NM)
BIN_INST=$(TBASE)/bin

# if the target is DEBIAN or RPM package, then
# install the include files
REAL_INC_INST=$(DESTDIR)$(PREFIX)/include/yuma

#################### MAKE RULES ########################

all: agtdummy agtlib

#################### PLATFORM DEFINITIONS ############
include ../platform/platform.profile

################ DEPENDENCIES #########################
# depend rule must be included after the 'all' make rule

include ../platform/platform.profile.depend

ifdef DEBIAN
BLD_INCLUDES=
else
BLD_INCLUDES=includes
endif

test:

ifdef SHLIBS
# nothing to do for debian SHLIBS build
install:
else 
ifdef SERVER
# nothing to do for debian SERVER build
install:
else 
ifdef CLIENT
# nothing to do for debian CLIENT build
install:
else 
ifdef DEVELOPER
# just install the H files
install: includes
else
# just install the H files, except debian yuma-tools build
install: $(BLD_INCLUDES)
endif
endif
endif
endif

uninstall:

ifdef CLIENT
agtlib:
else
ifdef DEVELOPER
agtlib:
else
ifdef SHLIBS
agtlib:
else
# either SERVER or normal or RPM build
agtlib: dependencies $(LBASE)/lib$(SUBDIR_NM).a
endif
endif
endif

# this dummy rule keeps make from deleting the $(OBJS) as
# intermediate files
ifdef CLIENT
agtdummy:
else
agtdummy: dependencies $(OBJS)
endif

clean:
ifndef CLIENT
	rm -f $(OBJS) $(LBASE)/lib$(SUBDIR_NM).*
endif

superclean:
ifndef CLIENT
	rm -f *~  $(DEPS) dependencies $(OBJS) \
	$(LBASE)/lib$(SUBDIR_NM).*
endif

distclean: superclean


includes:
ifndef SHLIBS
ifndef SERVER
ifndef CLIENT
	mkdir -p $(REAL_INC_INST)/agt
	cp *.h $(REAL_INC_INST)/agt
endif
endif
endif


.PHONY: includes


# prevent the make program from choking on all the symbols
# that get generated from autogenerated make rules
.NOEXPORT:

ifndef CLIENT
ifndef DEVELOPER
include dependencies
endif
endif

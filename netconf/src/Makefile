# Makefile for NETCONF entire source directory
#  
#   src directory

##################### PROGRAMS ########################
APPS = subsys netconfd yangdump yangdiff yangcli

##################### LIBRARIES ########################
#
# DIRS:  
# This is an ordered list
# Put only the directories that build object files in the list

# make all targets
DIRS = agt mgr ncx $(APPS)

# make agent without other targets
AGTDIRS = agt ncx netconfd

JFLAG = -j3

#################### PLATFORM DEFINITIONS ############

all: treeall

include platform/platform.profile

################################ MAKE RULES #################################
#


depend: treedepend

clean: treeclean

superclean: treesuperclean

test: treetest

lint: treelint

install: treeinstall


treeall:
	/bin/sh platform/setversion.sh
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) $(JFLAG) all && cd ..;\
        done

treedepend:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) $(JFLAG) depend && cd ..;\
        done

treeclean:
	/bin/sh platform/setversion.sh
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) clean && cd ..;\
        done

treesuperclean:
	/bin/sh platform/setversion.sh
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) superclean && cd ..;\
        done

treetest:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) $(JFLAG) test && cd ..;\
        done

treelint:
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) $(JFLAG) lint && cd ..;\
        done

treeinstall:
	for dir in $(DIRS); do\
          cd $$dir && $(MAKE) install && cd ..;\
        done

.PHONY: depend clean superclean test lint install \
	treeall treedepend treeclean treesuperclean \
	treetest treelint treeinstall

# prevent the make program from choking on all the symbols
# that get generated from autogenerated make rules
.NOEXPORT:



